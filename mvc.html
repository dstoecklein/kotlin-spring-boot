
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>MVC - Spring & Hibernate</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spring-mvc" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Spring &amp; Hibernate" class="md-header__button md-logo" aria-label="Spring & Hibernate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spring & Hibernate
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MVC
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Spring &amp; Hibernate" class="md-nav__button md-logo" aria-label="Spring & Hibernate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Spring & Hibernate
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="annotations.html" class="md-nav__link">
        Annotations
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          MVC
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="mvc.html" class="md-nav__link md-nav__link--active">
        MVC
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#benefits" class="md-nav__link">
    Benefits
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="hibernate.html" class="md-nav__link">
        Hibernate
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="hibernate_mvc_project.html" class="md-nav__link">
        Hibernate & MVC Project
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="aop.html" class="md-nav__link">
        Aspect Oriented Programming (AOP)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="security.html" class="md-nav__link">
        Security
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="maven.html" class="md-nav__link">
        Maven
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="rest.html" class="md-nav__link">
        REST
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="spring-mvc">Spring MVC<a class="headerlink" href="#spring-mvc" title="Permanent link">&para;</a></h1>
<ul>
<li>Framework for building web applications in Java.</li>
<li>Based on Model-View-Controller design pattern</li>
<li>Leverage features of the Core Spring Framework (Inversion of Control, Dependency Injection)</li>
<li>Incoming request -&gt; Front controller delegates request to controller -&gt; create a model -&gt; pass that model to view template (HTML page) -&gt; show view template in browser</li>
</ul>
<h2 id="benefits">Benefits<a class="headerlink" href="#benefits" title="Permanent link">&para;</a></h2>
<ul>
<li>Spring way of building web app UIs in Java</li>
<li>Reusable UI components</li>
<li>Help manage app state for requests</li>
</ul>
<h1 id="behind-the-scenes-of-spring-mvc">Behind the scenes of Spring MVC<a class="headerlink" href="#behind-the-scenes-of-spring-mvc" title="Permanent link">&para;</a></h1>
<p>Components:
* A set of web pages (UI components)
* A collection of Spring beans
* Spring configuration (XML, Annotations or Java)</p>
<p>Everything starts off with an incoming request.</p>
<p><img alt="mvc" src="images/mvc.png" /></p>
<h3 id="front-controller">Front controller<a class="headerlink" href="#front-controller" title="Permanent link">&para;</a></h3>
<ul>
<li>Known as <strong>DispatcherServlet</strong></li>
<li>Delegates request to the other objects</li>
<li>Part of Spring Framework, already developed by Spring dev team</li>
</ul>
<h3 id="controller">Controller<a class="headerlink" href="#controller" title="Permanent link">&para;</a></h3>
<ul>
<li>Handles request</li>
<li>Store/retrieve data (db, web services)</li>
<li>Place data in model</li>
</ul>
<h3 id="model">Model<a class="headerlink" href="#model" title="Permanent link">&para;</a></h3>
<ul>
<li>Contains your data</li>
<li>Place data in the model</li>
<li>Data can be Java object / collection</li>
</ul>
<h3 id="view-template">View template<a class="headerlink" href="#view-template" title="Permanent link">&para;</a></h3>
<ul>
<li>Displays data</li>
<li>Most common is JSP + JSTL</li>
<li>Other templates are: Thymeleaf, Groovy, Velocity, ...</li>
</ul>
<h1 id="spring-mvc-configuration-most-complicatedimportant">Spring MVC configuration (most complicated/important)<a class="headerlink" href="#spring-mvc-configuration-most-complicatedimportant" title="Permanent link">&para;</a></h1>
<h2 id="part-1">Part 1<a class="headerlink" href="#part-1" title="Permanent link">&para;</a></h2>
<ul>
<li>Add configurations to file: <code>WEB-INF/web.xml</code></li>
<li>Configure Spring MVC Dispatcher-Servlet (Remember: Its part of Spring)</li>
<li>Set up URL mappings to Spring MVC Dispatcher-Servlet</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="nt">&lt;web-app&gt;</span>
  <span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>

    <span class="nt">&lt;init-param&gt;</span>
      <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
      <span class="nt">&lt;param-value&gt;</span>/WEB-INF/spring-mvc-demo-servlet.xml<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>

    <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
  <span class="nt">&lt;/servlet&gt;</span>

  <span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>dispatcher<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/<span class="nt">&lt;/url-pattern&gt;</span>
  <span class="nt">&lt;/servlet-mapping&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div>
<code>servlet-name</code> must match in mapping: <code>dispatcher</code></p>
<h2 id="part">Part<a class="headerlink" href="#part" title="Permanent link">&para;</a></h2>
<ul>
<li>Add configurations to file: <code>WEB-INF/spring-mvc-demo-servlet.xml</code></li>
<li>Add support for Spring component scanning</li>
<li>Add support for conversion, formatting and validation</li>
<li>Configure Spring MVC View Resolver</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;beans&gt;</span>
  <span class="cm">&lt;!-- Add support for Spring component scanning --&gt;</span>
  <span class="nt">&lt;context:component-scan</span> <span class="na">base-package=</span><span class="s">&quot;com.dstoecklein.springdemo&quot;</span> <span class="nt">/&gt;</span>
  <span class="cm">&lt;!-- Add support for conversion, formatting and validation --&gt;</span>
  <span class="nt">&lt;mvc:annotation-driven/&gt;</span>
  <span class="cm">&lt;!-- Configure Spring MVC View Resolver --&gt;</span>
  <span class="nt">&lt;bean&gt;</span>
    class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;prefix&quot;</span> <span class="na">value=</span><span class="s">&quot;/WEB-INF/view&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;suffix&quot;</span> <span class="na">value=</span><span class="s">&quot;.jsp&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div>
<p><code>InternalResourceViewResolver</code> means: How are pages be rendered?</p>
<p>For example: We returned a view name of <code>show-student-list</code>. Then Spring will automatically add the prefix and
suffix: <code>/WEB-INF/view/show-student-list.jsp</code>.</p>
<h1 id="our-first-mvc-app">Our First MVC App<a class="headerlink" href="#our-first-mvc-app" title="Permanent link">&para;</a></h1>
<p><img alt="mvc" src="images/mvc2.png" /></p>
<ol>
<li>Create Controller class</li>
<li>Annotate with <code>@Controller</code>. It tells MVC that this class is a controller. It also inherits from <code>@Component</code>, this will automatically picked up by component scanning.</li>
<li>Define Controller method</li>
<li>In our case <code>public String showPage()</code></li>
<li>Add request mapping to controller method</li>
<li><code>@RequestMapping("/")</code>. So we map the method to this root path. So when users to go on the website, they will see what we defined. It will handle all type of requests like <code>GET</code> or <code>POST</code>.</li>
<li>Return View name</li>
<li><code>return "main-menu"</code>. Based on the config file, it will look under the given <code>prefix</code> directory and will then append the <code>suffix</code>.</li>
<li>Create the View page</li>
<li>Just any regular HTML page</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="nd">@Controller</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HomeController</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">showPage</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;main-menu&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="read-form-data-with-spring-mvc">Read Form-Data with Spring MVC<a class="headerlink" href="#read-form-data-with-spring-mvc" title="Permanent link">&para;</a></h1>
<p><img alt="mvc" src="images/mvc3.png" /></p>
<p>The key here is to have one <code>HelloWorldController</code> with two different <code>RequestMapping</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Controller</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">HelloWorldController</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/showForm&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">showForm</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;helloworld-form&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/processForm&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">processForm</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;helloworld&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Step by step:
1. Create controller class
2. Show HTML form
  3. Create controller method to show HTML form
  4. Create View page for HTML form
5. Process HTML form
  6. Create controller
  7. Develop view page</p>
<h1 id="adding-data-to-the-spring-model">Adding data to the Spring model<a class="headerlink" href="#adding-data-to-the-spring-model" title="Permanent link">&para;</a></h1>
<ul>
<li>Model is a container for our application data</li>
<li>Strings, objects, info from database, ...</li>
<li>
<p>View page (JSP) can access data from the model</p>
</li>
<li>
<p>Pass model to controller. In this example: Lets make name uppercase from input-field.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/processFormVersionTwo&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">letsShoutDude</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">theName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&quot;studentName&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">theName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theName</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Yo! &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theName</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;helloworld&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>Access data from model in view page
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
Hello World!
...
The message: ${message}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></li>
</ol>
<h1 id="bonus">Bonus<a class="headerlink" href="#bonus" title="Permanent link">&para;</a></h1>
<p>Bonus: Deploying your App to Tomcat as a Web Application Archive (WAR) file</p>
<p>When you deploy your Java web apps, you can make use of a Web Application Archive (WAR) file.</p>
<p>The Web Application Archive (WAR) file is a compressed version of your web application. It uses the zip file format but the file has the .war extension.</p>
<p>If you are using Eclipse, then the best way to visualize it is think of your "WebContent" directory being compressed as a zip file with the .war extension.</p>
<p>This includes all of your web pages, images, css etc. It also includes the WEB-INF directory which includes your classes in WEB-INF/classes and supporting JAR files in WEB-INF/lib.</p>
<p>The WAR file format is part of the Java EE / Servlet specification. As a result, all Java EE servers support this format (ie jboss, weblogic, websphere, glassfish and tomcat).</p>
<p>Below, I provide steps on how to create a WAR file in Eclipse. I also show how to deploy the WAR file on Tomcat.</p>
<h1 id="reading-html-form-data-with-requestparam">Reading HTML Form data with <code>@RequestParam</code><a class="headerlink" href="#reading-html-form-data-with-requestparam" title="Permanent link">&para;</a></h1>
<ul>
<li>... Instead of using <code>HttpServletRequest</code></li>
<li>Spring will read param from request: <code>studentName</code></li>
<li>Bind it to the variable: <code>theName</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/processFormVersionThree&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">processFormVersionThree</span><span class="p">(</span><span class="nd">@RequestParam</span><span class="p">(</span><span class="s">&quot;studentName&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">theName</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">theName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theName</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Yo!! &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theName</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">model</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;helloworld&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="add-controller-requestmapping">Add Controller <code>@RequestMapping</code><a class="headerlink" href="#add-controller-requestmapping" title="Permanent link">&para;</a></h1>
<ul>
<li>You can define a request mapping at the controller-level</li>
<li>All request mappings on methods in the controller are relative: Similar to folder directory structure</li>
<li>So it would be: <code>/funny/showForm</code>. Where <code>/funny</code> is controller mapping and <code>/showForm</code> method mapping.</li>
<li>Great technique to group requests</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/funny&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FunnyController</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/showForm&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">showForm</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/processForm&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">Model</span><span class="w"> </span><span class="n">model</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h1 id="spring-mvc-form-tags">Spring MVC Form Tags<a class="headerlink" href="#spring-mvc-form-tags" title="Permanent link">&para;</a></h1>
<ul>
<li>Spring MVC Form Tags are the building block for a web page</li>
<li>Can make use of data binding</li>
<li>Automatically setting / retrieving data from Java objects / beans</li>
<li>Will generate HTML for you + some special features</li>
<li>Put in JSP page</li>
<li>To reference Form Tags make use of: <code>&lt;%@ taglib prefix="form" uri="..."%&gt;</code> in JSP file</li>
<li>Examples</li>
<li>form:form</li>
<li>form:input</li>
<li>form:textarea</li>
<li>form:checkbox</li>
<li>...</li>
</ul>
<p><code>StudentController</code>
* New Student Object is passed to the Form
<div class="highlight"><pre><span></span><code><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/showForm&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">showForm</span><span class="p">(</span><span class="n">Model</span><span class="w"> </span><span class="n">theModel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">theModel</span><span class="p">.</span><span class="na">addAttribute</span><span class="p">(</span><span class="s">&quot;student&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Student</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;student-form&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p><code>form.jsp</code>
* When Form is loaded, Spring will call: <code>student.getFirstName()</code> (reference to <code>path="firstName"</code>)
* When Form is submited, Spring will call: <code>student.setFirstName()</code>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">form:form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;processForm&quot;</span> <span class="na">modelAttribute</span><span class="o">=</span><span class="s">&quot;student&quot;</span><span class="p">&gt;</span>
    First name: <span class="p">&lt;</span><span class="nt">form:input</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;firstName&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    Last name: <span class="p">&lt;</span><span class="nt">form:input</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;lastName&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Submit&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">form:form</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Read form in <code>StudentController</code>:
* <code>@ModelAttribute</code> is bind to the above <code>modelAttribute="student"</code>. Spring will take the model attribute and bind it to the variable <code>theStudent</code>.
* No more <code>request.getParamter</code> needed.
<div class="highlight"><pre><span></span><code><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/processForm&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">processForm</span><span class="p">(</span><span class="nd">@ModelAttribute</span><span class="p">(</span><span class="s">&quot;student&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Student</span><span class="w"> </span><span class="n">theStudent</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;theStudent: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theStudent</span><span class="p">.</span><span class="na">getLastName</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;student-confirmation&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p><code>student-confirmation</code>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
The student is confirmed: ${student.firstName} ${student.lastName}
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></p>
<p><img alt="mvc4" src="images/mvc4.png" /></p>
<h1 id="dropdown-list">Dropdown list<a class="headerlink" href="#dropdown-list" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">form:select</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;country&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form:option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Brazil&quot;</span> <span class="na">label</span><span class="o">=</span><span class="s">&quot;Brazil&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">form:option</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;USA&quot;</span> <span class="na">label</span><span class="o">=</span><span class="s">&quot;USA&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">form:select</span><span class="p">&gt;</span>
</code></pre></div>
<h1 id="radio-buttons">Radio Buttons<a class="headerlink" href="#radio-buttons" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code>Java <span class="p">&lt;</span><span class="nt">form:radiobutton</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;favoriteLanguage&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Java&quot;</span> <span class="p">/&gt;</span>
Perl <span class="p">&lt;</span><span class="nt">form:radiobutton</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;favoriteLanguage&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Perl&quot;</span> <span class="p">/&gt;</span>
Python <span class="p">&lt;</span><span class="nt">form:radiobutton</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;favoriteLanguage&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Python&quot;</span> <span class="p">/&gt;</span>
</code></pre></div>
<h1 id="check-boxes">Check Boxes<a class="headerlink" href="#check-boxes" title="Permanent link">&para;</a></h1>
<div class="highlight"><pre><span></span><code>Linux <span class="p">&lt;</span><span class="nt">form:checkbox</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;operatingSystems&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Linux&quot;</span> <span class="p">/&gt;</span>
Windows <span class="p">&lt;</span><span class="nt">form:checkbox</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;operatingSystems&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Windows&quot;</span> <span class="p">/&gt;</span>
MacOS <span class="p">&lt;</span><span class="nt">form:checkbox</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;operatingSystems&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;MacOS&quot;</span> <span class="p">/&gt;</span>
</code></pre></div>
<h1 id="spring-mvc-form-validation">Spring MVC Form Validation<a class="headerlink" href="#spring-mvc-form-validation" title="Permanent link">&para;</a></h1>
<ul>
<li>Validate the Fields in the Form (range, format, custom rule, ...)</li>
<li>Java has standard bean validation API</li>
<li>Spring version 4 and higher supports Bean Validation API (preferred)</li>
<li>Examples</li>
<li><code>@NotNull</code></li>
<li><code>@Min</code>, <code>@Max</code></li>
<li><code>@Size</code></li>
<li><code>@Pattern</code> for regex</li>
<li>
<p>...</p>
</li>
<li>
<p>Setting up Environment</p>
</li>
<li>We need an implementation of Java's standard Bean Validation API (JSR-303)</li>
<li>Here comes Hibernate into play</li>
<li>Has a separate project just for doing validation (Hibernate validator)</li>
<li>Jakarte EE</li>
<li>Community implementation of Java EE, so not maintained by Oracle</li>
<li>Important: <code>javax.*</code> packages are renamed to <code>jakarta.*</code></li>
<li>Hibernate Validator 7 is based on Jakarta EE 9</li>
<li>Spring 5 is still bases on Java EE (javax.*)</li>
<li>
<p>Spring 5 is not compatible with Hibernate Validator 7 (use Hibernator 6.2)</p>
</li>
<li>
<p>If using Spring 5, use Hibernate Validator 6.2</p>
</li>
<li>If using Spring Jakarta EE 9, use Hibernator Validator 7</li>
</ul>
<h2 id="required-fields">Required Fields<a class="headerlink" href="#required-fields" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>E.g. last name is required</p>
</li>
<li>
<p>Add validation rule to Customer class</p>
</li>
<li>Display error Message on HTML form</li>
<li>Perform validation in Controller class</li>
<li>Update confirmation page</li>
</ul>
<p>Add validation rule to Customer class</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Customer</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">firstName</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">&quot;is required&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Size</span><span class="p">(</span><span class="n">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="o">=</span><span class="s">&quot;is required&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// minimum of 1 char</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">lastName</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Display error Message on HTML form
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">form:form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;processForm&quot;</span> <span class="na">modelAttribute</span><span class="o">=</span><span class="s">&quot;customer&quot;</span><span class="p">&gt;</span>
    First name: <span class="p">&lt;</span><span class="nt">form:input</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;firstname&quot;</span> <span class="p">/&gt;</span>

    Last name (*): <span class="p">&lt;</span><span class="nt">form:input</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;lastName&quot;</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">form:errors</span> <span class="na">path</span><span class="o">=</span><span class="s">&quot;lastName&quot;</span> <span class="na">cssClass</span><span class="o">=</span><span class="s">&quot;error&quot;</span> <span class="p">/&gt;</span>
    ...
<span class="p">&lt;/</span><span class="nt">form:form</span><span class="p">&gt;</span>
</code></pre></div></p>
<p>Perform validation in Controller class
* <code>@Valid</code>: Perform validation rules on <code>Customer</code> object
* <code>BindingResult</code>: Result of that validation will be placed in here
<div class="highlight"><pre><span></span><code><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/processForm&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">processForm</span><span class="p">(</span><span class="nd">@Valid</span><span class="w"> </span><span class="nd">@ModelAttribute</span><span class="p">(</span><span class="s">&quot;customer&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">Customer</span><span class="w"> </span><span class="n">theCustomer</span><span class="p">,</span><span class="w"> </span><span class="n">BindingResult</span><span class="w"> </span><span class="n">theBindingResult</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">theBindingResult</span><span class="p">.</span><span class="na">hasErrors</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;customer-form&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;customer-confirmation&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w">    </span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>Update confirmation page
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
confirmed: ${customer.firstName} ...
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div></p>
<h1 id="spring-mvc-validation-for-numbers">Spring MVC Validation for Numbers<a class="headerlink" href="#spring-mvc-validation-for-numbers" title="Permanent link">&para;</a></h1>
<p>Steps are the same as above
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Customer</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Min</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="o">=</span><span class="s">&quot;must be greater than 0&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Max</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="o">=</span><span class="s">&quot;must be less than 10&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">freePasses</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>No modifications needed in <code>CustomerController</code></p>
<h1 id="spring-mvc-validation-with-regular-expressions">Spring MVC Validation with Regular Expressions<a class="headerlink" href="#spring-mvc-validation-with-regular-expressions" title="Permanent link">&para;</a></h1>
<ul>
<li>e.g. to validate postal code. We apply a pattern.</li>
</ul>
<p>Steps are the same as above
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Customer</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Pattern</span><span class="p">(</span><span class="n">regexp</span><span class="o">=</span><span class="s">&quot;^[a-zA-Z0-9]{5}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="o">=</span><span class="s">&quot;only 5 chars/digits&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">postalCode</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<h1 id="make-an-integer-field-required">Make an Integer Field "required"<a class="headerlink" href="#make-an-integer-field-required" title="Permanent link">&para;</a></h1>
<ul>
<li>Cant use <code>@NotNull()</code> with <code>int</code>. Instead use Wrapper class <code>Integer</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@NotNull</span><span class="p">(</span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;is required&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">freePasses</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<ul>
<li>Also update getter/setter
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getFreePasses</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">freePasses</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setFreePasses</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">freePasses</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">this</span><span class="p">.</span><span class="na">freePasses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">freePasses</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></li>
</ul>
<h1 id="handle-string-input-for-integer-fields">Handle String-input for Integer fields<a class="headerlink" href="#handle-string-input-for-integer-fields" title="Permanent link">&para;</a></h1>
<p>So we only can give digits as input</p>
<ol>
<li>Create a custom error message</li>
<li><code>src/resources/messages.properties</code></li>
<li>Load custom messages resource in Spring config file</li>
<li><code>WebContent/WEB-INF/spring-mvc-demo-servlet.xml</code></li>
</ol>
<p>Create a custom error message
<img alt="mvc5" src="images/mvc5.png" /></p>
<p>Load custom messages resource in Spring config file
<div class="highlight"><pre><span></span><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;messageSource&quot;</span> <span class="na">class=</span><span class="s">&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;basenames&quot;</span> <span class="na">value=</span><span class="s">&quot;resources/messages&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div></p>
<h1 id="spring-mvc-custom-validation">Spring MVC Custom Validation<a class="headerlink" href="#spring-mvc-custom-validation" title="Permanent link">&para;</a></h1>
<ul>
<li>Custom Business rules, e.g. Course Code must start with "LUV"</li>
<li>Own Custom Annotation, e.g. <code>@CourseCode</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nd">@CourseCode</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s">&quot;LUV&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="o">=</span><span class="s">&quot;must start with LUV&quot;</span><span class="p">)</span><span class="w"></span>
<span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">courseCode</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<ol>
<li>Create custom validation rule:</li>
<li>Create <code>@CourseCode</code> Annotation</li>
<li>
<p>Create <code>CourseCodeConstraintValidator</code> (our own custom logic)</p>
</li>
<li>
<p><code>@interface</code> special type of interface to create a custom annotation in Java</p>
</li>
<li><code>@Constraint</code> constraint that is validated by a class with given business rules / logic</li>
<li><code>@Target</code> where can we apply this annotation? Here we can use it to a method or field</li>
<li><code>@Retention</code> how long should we retain the annotation? Here, runtime so we can inspect it at runtime</li>
</ol>
<p><code>src/com.dstoecklein.springdemo.mvc.validation</code></p>
<p><code>CourseCode.java</code></p>
<div class="highlight"><pre><span></span><code><span class="nd">@Constraint</span><span class="p">(</span><span class="n">validatedBy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CourseCodeConstraintValidator</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="nd">@Target</span><span class="p">(</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">FIELD</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">CourseCode</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// define default course code</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">value</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s">&quot;LUV&quot;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// define default error message</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">message</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s">&quot;must start with LUV&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ol>
<li>Create <code>CourseCodeConstraintValidator</code></li>
</ol>
<p><code>src/com.dstoecklein.springdemo.mvc.validation</code></p>
<p><code>CourseCodeConstraintValidator.java</code></p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CourseCodeConstraintValidator</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ConstraintValidator</span><span class="o">&lt;</span><span class="n">CourseCode</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">coursePrefix</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">CourseCode</span><span class="w"> </span><span class="n">theCourseCode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">coursePrefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theCourseCode</span><span class="p">.</span><span class="na">value</span><span class="p">();</span><span class="w"> </span><span class="c1">// gives me value from @CourseCode(value=&quot;LUV&quot;, message=&quot;&quot;)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Spring MVC will call this at runtime</span><span class="w"></span>
<span class="w">  </span><span class="c1">// ConstraintValidatorContext is a helper class to add messages later</span><span class="w"></span>
<span class="w">  </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">  </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">isValid</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">theCode</span><span class="p">,</span><span class="w"> </span><span class="n">ConstraintValidatorContext</span><span class="w"> </span><span class="n">theConstraintValidatorContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">boolean</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">theCode</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// does it start with &quot;LUV&quot;?</span><span class="w"></span>
<span class="w">      </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theCode</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="n">coursePrefix</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// if course code is empty, return true</span><span class="w"></span>
<span class="w">      </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="annotations.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Annotations" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Annotations
            </div>
          </div>
        </a>
      
      
        
        <a href="hibernate.html" class="md-footer__link md-footer__link--next" aria-label="Next: Hibernate" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Hibernate
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.sections", "toc.integrate", "navigation.top"], "search": "assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>